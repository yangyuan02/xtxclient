<div class="container-fluid" ng-init="initLearn()">
  <div class="row">
    <div class="course-player-navbar clearfix">
      <a ng-href="/course/{{ course.info.id }}" class="pull-left text-center back"><i class="icon icon-arrow-left"></i></a>
      <!-- è¯¾ç¨‹åç§° -->
      <div class="pull-left course">
        <h4 class="title toggle" ng-if="!!course.info">{{ course.info.name }} - {{ section.info.name }}</h4>
        <h4 class="title toggle text-muted" ng-if="!course.info">è¯¾ç¨‹åŠ è½½ä¸­...</h4>
      </div>
      <!-- è¯¾ç¨‹æ”¶è— & åˆ†äº« -->
      <div class="pull-right clearfix action">
        <a href="" 
           class="pull-left favorite" 
           ng-class="{ true: 'favorited' }[!!course.relation.follow]" 
           ng-click="addFav(course.info.id)">
          <i class="icon icon-like"></i>
          <span ng-show="!!course.relation.follow">å·²</span>æ”¶è—({{ course.info.follow_count }})
        </a>
        <div class="pull-left share">
          <span class="pull-left title"><i class="icon icon-share"></i>&nbsp;åˆ†äº«åˆ°ï¼š</span>
          <a href="" class="icon icon-weibo" ng-click="share('weibo')"></a>
          <a href="" class="icon icon-wechat" ng-click="share('qrcode')"></a>
          <a href="" class="icon icon-qq" ng-click="share('qq')"></a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid course-player-box">
  <div class="row">

    <!-- æ’­æ”¾å™¨ -->
    <div class="course-video" ng-init="sidebar_show = !!player.is_live">

      <!-- è§†é¢‘åŒºåŸŸ -->
      <div class="course-video-box-left" ng-class="{ 'active': !!sidebar_show }">
        
        <!-- éšè—å†…å®¹ -->
        <div class="action-box no-animation" ng-if="section.player.mask.show">
          <h3 class="title">
            <span>ğŸ˜³</span>
            <span>{{ section.player.mask.title }}</span>
          </h3>
          <p class="next no-animation" ng-if="section.player.mask.btn.show">
            <button class="btn btn-lg btn-more" 
                    ng-class="{ 
                      'btn-primary': section.player.mask.btn.style == 1, 
                      'btn-warning': section.player.mask.btn.style == 2,
                      'btn-danger': section.player.mask.btn.style == 3,
                    }" 
                    ng-click="section.player.mask.btn.click()">{{ section.player.mask.btn.text }}</button>
          </p>
          <p class="refresh" ng-if="section.player.mask.refresh">
            <a href="" ng-click="playerRefreshPlay()">
              <i class="icon icon-refresh"></i>
              <span>é‡æ–°è§‚çœ‹</span>
            </a>
          </p>
        </div>
        
        <!-- æ’­æ”¾å™¨æ ¸å¿ƒ -->
        <div video-player data="player"></div>
      </div>

      <!-- èŠå¤©å®¤åŠå…¶ä»– -->
      <div class="course-video-box-right" 
           ng-class="{ 'active': !!sidebar_show }" 
           ng-init="sidebar_show = true">

        <!-- æŠ˜å æŒ‰é’® -->
        <a class="switch-btn" ng-click="sidebar_show = !sidebar_show">
          <i class="icon" ng-class="{ true: 'icon-arrow-right', false: 'icon-arrow-left' }[sidebar_show]"></i>
        </a>
        
        <!-- TabåŒºåŸŸ -->
        <div tabset justified="true" largesize="false">

          <!-- ç›®å½• -->
          <div tab heading="ç›®å½•" class="directory-tab">
            <div class="directory-box">
              <div class="directory-lists">
                <h4>{{ course.info.name }}</h4>
                <ul class="list-group directory-list-container toggle">
                  <li class="list-group-item" ng-repeat="chapter in course.chapters" >
                    <a  href=""
                        class="chapter" 
                        ng-class="{true: 'open'}[section_show]"
                        ng-click="section_show = !section_show" >
                        <span>{{ chapter.name }}</span>
                    </a>
                    <div class="section slide-down" ng-show="section_show">
                      <a  ng-href="/course/{{ course_id }}/learn/{{ section.id }}" 
                          ng-repeat="section in chapter.children" 
                          ng-class="{ 'active': section_id == section.id }"
                          ng-init="$parent.section_show = section_id == section.id ? true : $parent.section_show;pushSections(section);section.live_status = (section.live_status > 10) ? (section.live_status / 10) : ((section.live_status == 10) ? 1.05 : section.live_status)"
                          class="no-animation">
                        <i class="icon icon-play"></i>
                        <span title="{{ section.name }}">{{ section.name | textOverflow: 10 }}</span>
                        <span class="pull-right">
                          <span>
                            <i class="icon icon-playing" 
                               title="æ­£åœ¨å­¦ä¹ " 
                               ng-if="section_id == section.id"></i>
                            <i class="icon icon-play-over" 
                               title="å·²å­¦ä¹ è¿‡" 
                               ng-if="section_id != section.id && course.relation.study_records.finished.contain(section.id)"></i>
                            <span>&nbsp;</span>
                          </span>
                          <span ng-if="section.is_live" class="no-animation">
                            <span>ç›´æ’­</span>
                            <span>/</span>
                            <span ng-if="section.live_status < 2">æœªå¼€å§‹</span>
                            <span ng-if="section.live_status == 2">ç›´æ’­ä¸­</span>
                            <span ng-if="section.live_status == 3 || section.live_status == 4">å·²ç»“æŸ</span>
                            <span ng-if="section.live_status == 5">å¯å›æ”¾</span>
                          </span>
                          <span ng-if="!section.is_live" class="no-animation">å½•æ’­ / å¯æ’­æ”¾</span>
                          <span>/</span>
                          <span>{{ section.duration | toHHMMSS : 'HHMMSS' : ':' : ':' : '' }}</span>
                        </span>
                      </a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- è®¨è®º -->
          <div tab 
               heading="è®¨è®º" 
               active="true"
               class="chatroom-tab" 
               ng-if="!!player.is_live && (player.live_status == 2 || player.live_status == 5) && $root.user">
            <div class="chatroom-box">
              <div chat-box 
                   room-id="player.room_id" 
                   is-playback="player.live_status == 5"></div>
            </div>
          </div>

          <!-- åŒå­¦ -->
          <div tab heading="åŒå­¦" class="classmate-tab" ng-init="initLiveRoomUsers()">
            <div class="classmate-box">
              <ul class="classmate-lists">
                <li class="item">
                  <a ng-href="/organization/{{ course.info.organization.id }}/teacher/{{ course.info.teacher.id }}" target="_blank">
                    <img class="img-circle" 
                         width="28"
                         ng-src="{{ getThumbnail(course.info.teacher.gravatar, 'gravatar', { width: 48, height: 48 }) }}">
                    <span class="name">{{ course.info.teacher.profile.rel_name }}</span>
                    <span class="medal" >
                      <i class="icon icon-teacher"></i>
                      <span>æˆè¯¾è€å¸ˆ</span>
                    </span>
                    <span class="enter">
                      <span>è¿›å…¥ä¸»é¡µ</span>
                      <i class="icon icon-arrow-right"></i>
                    </span>
                  </a>
                </li>
                <li class="item no-animation" 
                    ng-repeat="classmate in course.live_users | orderBy: level_id">
                  <a ng-href="/space/student/{{ classmate.id }}" target="_blank">
                    <img class="img-circle" 
                         width="28"
                         ng-src="{{ getThumbnail(classmate.gravatar, 'sm_gravatar', { width: 48, height: 48 }) }}">
                    <span class="name">{{ classmate.name || 'åŒ¿åç”¨æˆ·' }}</span>
                    <span class="medal">
                      <i class="icon icon-level"></i>
                      <span>{{ classmate.level_id || '...' }}</span>
                    </span>
                    <span class="enter">
                      <span>è¿›å…¥ä¸»é¡µ</span>
                      <i class="icon icon-arrow-right"></i>
                    </span>
                  </a>
                </li>
              </ul>
              <p class="text-center text-muted" 
                 ng-if="!player.is_live || (player.is_live && player.live_status != 2 && player.live_status != 5)"><br>æ²¡æœ‰è·å–åˆ°æ›´å¤šåŒå­¦~ ğŸ˜</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="container">
    <div class="row">
      <div class="course-learn">

        <!-- é—®ç­”ã€ç¬”è®°ã€è¯„ä»· -->
        <div class="col-xs-8" id="player-container">
          <div class="main">
            <div tabset justified="true" largesize="false" id="J_learn_tab">

              <!-- é—®ç­” -->
              <div tab heading="é—®ç­”" icon="icon-question">
                <div class="box box-question">

                  <!-- å‘å¸ƒé—®ç­” -->
                  <div class="post-box">
                    <h5 ng-if="course.relation.trade_status == undefined" 
                        class="text-center text-info post-desable no-animation">
                        <span>ç™»å½•ä¹‹åæ‰èƒ½å‘å¸ƒé—®é¢˜~</span>
                        <a class="text-primary" href="" ng-click="loginGetRelation()">ç‚¹æ­¤ç™»å½•</a>
                    </h5>
                    <form name="newQuestion" 
                          class="no-animation"
                          ng-submit="postQuestion(question)" 
                          ng-if="course.relation.trade_status != undefined">
                      <div class="form-group">
                        <input type="text" 
                               class="form-control" 
                               placeholder="è¯·ç”¨10ä¸ªå­—ä»¥ä¸Šæ¥æè¿°ä½ çš„é—®é¢˜" 
                               name="new_question"
                               ng-model="question.content"
                               required 
                               ng-pattern="/.{10,}/" 
                               ng-focus="postDataFocus()">
                      </div>
                      <div class="form-group">
                        <button class="btn btn-primary pull-right" ng-disabled="newQuestion.$invalid">æé—®</button>
                      </div>
                    </form>
                  </div>

                  <!-- é—®ç­”å‘å¸ƒ -->
                  <div class="content-box">
                    <h5 ng-show="!section.questions.pagination.total" 
                        class="text-center text-info no-animation">æš‚æ—¶æ²¡æœ‰äººæé—®ï¼Œä½ å¯ä»¥æå‡ºç¬¬ä¸€ä¸ªé—®é¢˜</h5>

                    <!-- é—®ç­”åˆ—è¡¨ -->
                    <ul class="question-list no-animation" ng-show="!!section.questions.pagination.total">
                      <li class="media slide-top" ng-repeat="question in section.questions.result">
                        <i class="tag"></i>
                        <div class="media-left">
                          <a ng-href="/space/student/{{ question.user.id }}" target="_blank">
                            <img class="img-circle media-object center" 
                                 width="48"
                                 ng-src="{{ getThumbnail(question.user.gravatar, 'small_gravatar', { width: 48, height: 48 }) }}">
                            <h5 class="text-center">{{ question.user.name | limitTo: 4 }}</h5>
                          </a>
                        </div>
                        <div class="media-body">
                          <div class="content">
                            <p class="comment-content">
                              <span>{{ question.content }} - </span>
                              <a ng-href="/user/question/{{ question.id }}" 
                                 target="_blank" 
                                 title="è¿›å…¥é—®ç­”è¯¦æƒ…" 
                                 class="text-primary">[ æŸ¥çœ‹è¯¦ç»† ]</a>
                            </p>
                            <p class="comment-reply" 
                               ng-repeat="answer in question.children | limitTo: 3" 
                               ng-show="question.children.length > 0">
                              <a ng-href="/space/student/{{ answer.user.id }}" target="_blank">
                                <img class="img-circle"  width="24"
                                     ng-src="{{ getThumbnail(answer.user.gravatar, 'small_gravatar', { width: 24, height: 24 }) }}">
                                <span class="user-name">{{ answer.user.name }}ï¼š</span>
                              </a>{{ answer.content }}
                            </p>
                            <div>
                              <span class="created-at small">æé—®äºï¼š{{ question.created_at | date : 'yyyy-MM-dd hh:mm:ss' | relativeTime}}</span>
                              <span class="small pull-right" ng-if="question.user.id != $root.user.id">
                                <a href="" ng-click="replyQuestion({ modal:true, question: question })">
                                  <i class="icon icon-reply"></i>
                                  <span>å›å¤é—®é¢˜</span>
                                </a>
                              </span>
                            </div>
                          </div>
                        </div>
                      </li>
                    </ul>

                    <!-- ç¿»é¡µ -->
                    <div class="pagenavi" ng-if="!!section.questions.pagination.total">
                      <hr>
                      <div class="page-wrap">
                        <div pagination 
                             total-items="section.questions.pagination.total" 
                             items-per-page="section.questions.pagination.per_page" 
                             ng-model="section.questions.pagination.current_page" 
                             max-size="maxSize" 
                             class="pagination-sm" 
                             boundary-links="true" 
                             rotate="false" 
                             ng-change="getSectionQuestions({ page: section.questions.pagination.current_page })">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ç¬”è®° -->
              <div tab heading="ç¬”è®°" icon="icon-list">
                <div class="box box-note">
                  <div class="post-box">

                   <!-- æœªç™»å½•æç¤º -->
                    <h5 ng-if="course.relation.trade_status == undefined" 
                        class="text-center text-info post-disable no-animation">
                      <span>ç™»å½•ä¹‹åæ‰èƒ½è®°å½•ç¬”è®°ï¼Œ</span>
                      <a class="text-primary" href="" ng-click="loginGetRelation()">ç‚¹æ­¤ç™»å½•</a>
                    </h5>

                    <!-- ç¬”è®°è¡¨å• -->
                    <form name="newNote" 
                          class="no-animation"
                          ng-if="course.relation.trade_status != undefined"
                          ng-submit="postNote(note)">
                      <div class="form-group">
                        <textarea class="form-control textarea" 
                                  placeholder="åœ¨è¿™é‡Œè¾“å…¥ç¬”è®°å†…å®¹" 
                                  name="new_note_content" 
                                  rows="3" 
                                  required 
                                  ng-pattern="/.{3,}/" 
                                  ng-model="note.content"
                                  ng-focus="postDataFocus()">
                        </textarea>
                      </div>
                      <div class="form-group">

                        <!-- æ˜¯å¦æˆªå± -->
                        <input type="checkbox" 
                               name="new_note_capture" 
                               class="ng-hide" 
                               id="J_new_note_capture" 
                               ng-init="note.capture = true"
                               ng-model="note.capture">

                        <!-- æ˜¯å¦å…¬å¼€ -->
                        <input type="checkbox" 
                               name="new_note_publish" 
                               class="ng-hide" 
                               id="J_new_note_publish" 
                               ng-init="note.publish = true"
                               ng-model="note.publish">

                        <!-- ä¿å­˜æŒ‰é’® -->
                        <button class="btn btn-primary pull-right" 
                                ng-disabled="newNote.$invalid" >ä¿å­˜ç¬”è®°</button>

                        <!-- æˆªå±æŒ‰é’® -->
                        <label class="pull-right switch-btn" 
                               ng-class="{ true:'text-primary', false:'text-default' }[note.capture]" 
                               for="J_new_note_capture">
                          <span class="icon switch h5" 
                                ng-class="{ true:'icon-check-fill text-primary', false:'icon-check' }[note.capture]"></span>
                          <span class="explain">æˆªå–è§†é¢‘</span>
                        </label>

                        <!-- å…¬å¼€æŒ‰é’® -->
                        <label class="pull-right switch-btn" 
                               ng-class="{ true:'text-primary', false:'text-default' }[note.publish]" 
                               for="J_new_note_publish">
                          <span class="icon switch h5" 
                                ng-class="{ true:'icon-check-fill text-primary', false:'icon-check' }[note.publish]">
                          </span>
                          <span class="explain">è®¾ä¸ºå…¬å¼€</span>
                        </label>
                      </div>
                    </form>
                  </div>

                  <!-- ç¬”è®°åˆ—è¡¨ -->
                  <div class="content-box">

                    <h5 ng-show="!section.notes.pagination.total" class="text-center text-info no-animation"> 
                      <span>æš‚æ—¶æ²¡æœ‰äººä½œå‡ºç¬”è®°ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè®°å½•ç¬¬ä¸€ä¸ªç¬”è®°</span>
                    </h5>

                    <!-- åˆ—è¡¨ -->
                    <ul class="note-list no-animation" ng-show="!!section.notes.pagination.total">
                      <!-- å­åˆ—è¡¨ -->
                      <li class="media slide-top" ng-repeat="note in section.notes.result">
                        <div class="media-left">
                          <a ng-href="/space/student/{{ note.user.id }}" target="_blank">
                            <img class="img-circle media-object center"  width="48"
                                 ng-src="{{ getThumbnail(note.user.gravatar, '', { width: 48, height: 48 }) }}">
                          </a>
                        </div>
                        <div class="media-body">
                          <div class="content">
                            <h5>
                              <a ng-href="/space/student/{{ note.user.id }}" target="_blank">{{ note.user.name }}</a>
                            </h5>
                            <p class="text-height text-dark">{{ note.content }}</p>
                            <div class="capture" ng-if="note.capture_url || note.tmp_capture_url">
                              <a href="" ng-click="modal.imagePreview(note.capture_url || note.tmp_capture_url)">
                                <img class="capture-img" 
                                     ng-if="note.capture_url" 
                                     ng-src="{{ getThumbnail(note.capture_url, 'note', { width: 220, height: 120 }) }}">
                                <img class="capture-img" 
                                     ng-if="note.tmp_capture_url" 
                                     ng-src="{{ note.tmp_capture_url }}">
                                <span class="capture-time">{{ note.record_time | toHHMMSS : 'MMSS' }}</span>
                                <span class="capture-title">æŸ¥çœ‹åŸå›¾</span>
                              </a>
                            </div>
                            <p class="clearfix">
                              <span class="small pull-left">åˆ›å»ºäºï¼š{{ note.created_at | relativeTime }}</span>
                              <span class="small col-xs-6 col-xs-offset-1">æ¥è‡ªï¼š{{ note.section.name }}</span>
                              <span class="pull-right" ng-if="note.user.id != $root.user.id">
                                <a href="" 
                                   class="no-animation" 
                                   ng-if="!note.followed" 
                                   ng-click="addFavNote(note)">
                                   <i class="icon icon-like"></i>
                                   <span>&nbsp;æ”¶è—ç¬”è®°</span>
                                </a>
                                <a href="" 
                                   class="text-primary no-animation"
                                   ng-if="!!note.followed">
                                   <i class="icon icon-like text-primary"></i>
                                   <sapn>&nbsp;å·²æ”¶è—</sapn>
                                </a>
                              </span>
                            </p>
                          </div>
                        </div>
                      </li>
                    </ul>

                    <!-- ç¿»é¡µ -->
                    <div class="pagenavi" ng-if="!!section.notes.pagination.total">
                      <hr>
                      <div class="page-wrap">
                        <div pagination 
                             total-items="section.notes.pagination.total" 
                             items-per-page="section.notes.pagination.per_page" 
                             ng-model="section.notes.pagination.current_page" 
                             max-size="maxSize" 
                             class="pagination-sm" 
                             boundary-links="true" 
                             rotate="false" 
                             ng-change="getSectionNotes({ page: section.notes.pagination.current_page })">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- è¯„ä»· -->
              <div tab heading="è¯„ä»·" icon="icon-comment">
                <div class="box box-comment">
                  <div class="post-box">

                    <!-- æœªç™»å½• -->
                    <h5 ng-if="course.relation.trade_status == undefined" class="text-center text-info no-animation">
                        <span>è´­ä¹°æœ¬è¯¾ç¨‹ä¹‹åæ‰å¯ä»¥ä½œå‡ºè¯„ä»·ï¼Œ</span>
                        <a class="text-primary" href="" ng-click="loginGetRelation()">ç‚¹æ­¤ç™»å½•è´­ä¹°å®Œæ•´è¯¾ç¨‹</a>
                    </h5>

                    <!-- å‘å¸ƒè€… -->
                    <h5 ng-if="!!course.relation.author" 
                        class="text-center text-info no-animation">æ‚¨æ˜¯è¯¾ç¨‹çš„å‘å¸ƒè€…ï¼Œä¸èƒ½è¯„ä»·è‡ªå·±çš„è¯¾ç¨‹
                    </h5>

                    <!-- æœªè´­ä¹° -->
                    <h5 ng-if="(course.relation.trade_status < 1) && !course.relation.author" 
                        class="text-center text-info no-animation">
                        <span>è´­ä¹°æœ¬è¯¾ç¨‹ä¹‹åæ‰èƒ½ä½œå‡ºè¯„ä»·ï¼Œ</span>
                        <a class="text-primary" href="" ng-click="buy(course.info.id)">ç‚¹æ­¤è´­ä¹°å®Œæ•´è¯¾ç¨‹</a>
                    </h5>

                    <!-- æœªä»˜æ¬¾ -->
                    <h5 ng-if="course.relation.trade_status == 1 && !course.relation.author" 
                        class="text-center text-info no-animation">
                        <span>ä»˜æ¬¾ä¹‹åæ‰èƒ½åšå‡ºè¯„ä»·~</span>
                        <a class="text-primary" ng-href="/payment/{{ course.id }}" >ç‚¹æ­¤å‰å»ä»˜æ¬¾</a>
                    </h5>

                    <!-- å·²è¯„ä»· -->
                    <h5 ng-show="course.relation.trade_status == 3 && !course.relation.author" 
                        class="text-center text-info no-animation">
                        <span>æ‚¨å·²å¯¹æœ¬è¯¾ç¨‹åšå‡ºè¿‡è¯„ä»·ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œç¥å­¦ä¹ é¡ºåˆ©</span>
                    </h5>

                    <!-- è¯„ä»·è¡¨å• -->
                    <form name="newComment" 
                          class="no-animation"
                          ng-if="course.relation.trade_status == 2 && !course.relation.author"
                          ng-submit="postComment(comment)">
                      <div class="form-group comment-form">
                        <div class="col-xs-12 clearfix">
                          <p class="col-xs-12"></p>
                          <div comment-rating 
                               ng-init="comment.score.satisfaction = 5"
                               ng-model="comment.score.satisfaction" 
                               type="A" 
                               aria-labelledby="default-rating"></div>
                          <div comment-rating 
                               ng-init="comment.score.description = 5"
                               ng-model="comment.score.description" 
                               type="B" 
                               aria-labelledby="default-rating"></div>
                          <div comment-rating 
                               ng-init="comment.score.quality = 5"
                               ng-model="comment.score.quality" 
                               type="C" 
                               aria-labelledby="default-rating"></div>
                        </div>
                      </div>
                      <div class="form-group">
                        <textarea class="form-control textarea" 
                                  placeholder="æ‚¨è¿˜æ²¡æœ‰å¯¹æœ¬è¯¾ç¨‹ä½œå‡ºè¯„ä»·ï¼Œè¯·ç”¨10ä¸ªå­—ä»¥ä¸Šæ¥å‘è¡¨ä½ å¯¹æœ¬è¯¾ç¨‹çš„è¯„ä»·" 
                                  name="new_comment_content" 
                                  rows="3" 
                                  required  ng-pattern="/.{10,}/" 
                                  ng-model="comment.content" 
                                  ng-focus="postDataFocus()"></textarea>
                      </div>
                      <div class="form-group">
                        <button class="btn btn-primary pull-right" 
                                ng-disabled="newComment.$invalid">è¯„ä»·</button>
                      </div>
                    </form>
                  </div>

                  <!-- è¯„ä»·å†…å®¹åˆ—è¡¨ -->
                  <div class="content-box">

                  <!-- ç©ºæç¤º -->
                  <h5 ng-if="!course.comments.pagination.total" class="text-center text-info">æš‚æ— è¯„ä»·</h5>

                    <!-- åˆ—è¡¨ -->
                    <ul class="comment-list" ng-show="!!course.comments.pagination.total">
                      <li class="media" ng-repeat="comment in course.comments.result">
                        <div class="media-left">
                          <a ng-href="/space/student/{{ comment.user.id }}" target="_blank">
                            <img class="img-circle media-object center" width="48"
                                 ng-src="{{ getThumbnail(comment.user.gravatar, '', { width: 48, height: 48 }) }}">
                          </a>
                        </div>
                        <div class="media-body">
                          <div class="content">
                            <h5>
                              <a ng-href="/space/student/{{ comment.user.id }}" target="_blank">{{ comment.user.name }}</a>
                            </h5>
                            <p class="text-height">{{ comment.content }}</p>
                            <p ng-if="comment.description_score || comment.quality_score || comment.satisfaction_score" 
                               class="comment-score">
                              <span class="score-content" ng-if="!!comment.description_score">
                                <span class="score-title">è¯¾ç¨‹å†…å®¹ï¼š</span>
                                <span uib-rating 
                                      ng-model="comment.description_score" 
                                      readonly="true" 
                                      aria-labelledby="default-rating" 
                                      class="score-star">
                                </span>
                              </span>
                              <span class="score-content" ng-if="!!comment.quality_score">
                                <span class="score-title">æˆè¯¾æœåŠ¡ï¼š</span>
                                <span uib-rating 
                                      ng-model="comment.quality_score" 
                                      readonly="true" 
                                      aria-labelledby="default-rating" 
                                      class="score-star">
                                </span>
                              </span>
                              <span class="score-content" ng-if="!!comment.satisfaction_score">
                                <span class="score-title">æ»¡æ„ç¨‹åº¦ï¼š</span>
                                <span uib-rating 
                                      ng-model="comment.satisfaction_score" 
                                      readonly="true" 
                                      aria-labelledby="default-rating" class="score-star">
                                </span>
                              </span>
                            </p>
                            <!-- åµŒå¥—å›å¤ -->
                            <ul class="comment-reply" ng-if="!!comment.reply.length">
                              <li class="media" ng-repeat="reply in comment.reply">
                                <div class="media-left">
                                  <img class="img-circle media-object center" width="48"
                                       ng-src="{{ getThumbnail(reply.gravatar, 'smgravatar', { width: 48, height: 48 }) }}">
                                </div>
                                <div class="media-body">
                                  <div class="content">
                                    <p class="title">è€å¸ˆå›å¤ï¼š</p>
                                    <p>{{ reply.content }}</p>
                                  </div>
                                </div>
                              </li>
                            </ul>
                            <p class="created-at small text-muted">è¯„ä»·äºï¼š{{ comment.created_at | relativeTime }}</p>
                          </div>
                        </div>
                      </li>
                    </ul>

                    <!-- ç¿»é¡µ -->
                    <div class="pagenavi" ng-if="!!course.comments.pagination.total">
                      <hr>
                      <div class="page-wrap">
                        <div pagination 
                             total-items="course.comments.pagination.total" 
                             items-per-page="course.comments.pagination.per_page" 
                             ng-model="course.comments.pagination.current_page" 
                             max-size="maxSize" 
                             class="pagination-sm" 
                             boundary-links="true" 
                             rotate="false" 
                             ng-change="getComments({ page: course.comments.pagination.current_page })">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- åŒå­¦ç›¸å…³ -->
        <div class="col-xs-4">
          <div class="classmates">
            <h4 class="head-title">
              <span class="title">æˆ‘çš„åŒå­¦</span>
              <a href="" class="refresh" ng-click="refreshClassmates()">
                <i class="icon icon-refresh"></i>
              </a>
            </h4>
            <p ng-if="!course.classmates.pagination.total" class="text-info">æš‚æ— åŒå­¦</p>
            <ul class="classmate-lists" ng-if="!!course.classmates.pagination.total">
              <li class="item col-xs-3 toggle" ng-repeat="classmate in course.classmates.result">
                <a ng-href="/space/student/{{ classmate.id }}" target="_blank">
                  <img class="img-circle" width="48"
                       ng-src="{{ getThumbnail(classmate.gravatar, 'sm_gravatar', { width: 48, height: 48 }) }}">
                  <h5 class="name" title="{{ classmate.name }}">{{ classmate.name ? (classmate.name | textOverflow: 4) : 'åŒ¿åç”¨æˆ·' }}</h5>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>